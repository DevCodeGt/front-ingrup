/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input } from '@angular/core';
import { MapControls } from 'three/examples/jsm/controls/OrbitControls';
import { RendererService } from '../renderer/renderer.service';
import { AnimationService } from '../animation/animation.service';
import { RaycasterService } from '../raycaster/raycaster.service';
import { AbstractOrbitControls } from './abstract-orbit-controls';
export class MapControlsComponent extends AbstractOrbitControls {
    /**
     * @param {?} rendererService
     * @param {?} raycasterService
     * @param {?} animationService
     */
    constructor(rendererService, raycasterService, animationService) {
        super(rendererService, raycasterService);
        this.rendererService = rendererService;
        this.raycasterService = raycasterService;
        this.animationService = animationService;
        this.rotateSpeed = 1.0;
        this.zoomSpeed = 1.2;
        this.autoRotate = false;
        this.autoRotateSpeed = 0.5;
        this.enableDamping = false;
        this.dampingFactor = 0.1;
        this.screenSpacePanning = false;
        this.minDistance = 20;
        this.maxDistance = 200;
        this.maxPolarAngle = Math.PI / 2 - 0.1;
        this.panSpeed = 1.2;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (!this.controls) {
            return;
        }
        super.ngOnChanges(changes);
        if (changes['rotateSpeed']) {
            this.controls.rotateSpeed = this.rotateSpeed;
        }
        if (changes['zoomSpeed']) {
            this.controls.zoomSpeed = this.zoomSpeed;
        }
        // TODO: add others
    }
    /**
     * @protected
     * @return {?}
     */
    setUpControls() {
        this.controls = new MapControls(this.childCameras.first.camera, this.listeningControlElement && this.listeningControlElement.nativeElement);
        this.controls.rotateSpeed = this.rotateSpeed;
        this.controls.zoomSpeed = this.zoomSpeed;
        this.controls.panSpeed = this.panSpeed;
        this.controls.autoRotate = this.autoRotate;
        this.controls.autoRotateSpeed = this.autoRotateSpeed;
        this.controls.enableDamping = this.enableDamping; // an animation loop is required when either damping or auto-rotation are enabled
        this.controls.dampingFactor = this.dampingFactor;
        this.controls.screenSpacePanning = this.screenSpacePanning;
        this.controls.minDistance = this.minDistance;
        this.controls.maxDistance = this.maxDistance;
        this.controls.maxPolarAngle = this.maxPolarAngle;
        this.controls.update();
        // Advanced animation:
        if (this.autoRotate || this.enableDamping) {
            this.animationService.animate.subscribe((/**
             * @return {?}
             */
            () => {
                this.controls.update();
            }));
            this.controls.addEventListener('change', (/**
             * @return {?}
             */
            () => {
                this.rendererService.render();
            }));
            this.animationService.start();
        }
        this.rendererService.render();
    }
}
MapControlsComponent.decorators = [
    { type: Component, args: [{
                selector: 'atft-map-controls',
                template: `
      <ng-content></ng-content>`,
                styles: [":host{display:flex;flex:1}"]
            }] }
];
/** @nocollapse */
MapControlsComponent.ctorParameters = () => [
    { type: RendererService },
    { type: RaycasterService },
    { type: AnimationService }
];
MapControlsComponent.propDecorators = {
    rotateSpeed: [{ type: Input }],
    zoomSpeed: [{ type: Input }],
    autoRotate: [{ type: Input }],
    autoRotateSpeed: [{ type: Input }],
    enableDamping: [{ type: Input }],
    dampingFactor: [{ type: Input }],
    screenSpacePanning: [{ type: Input }],
    minDistance: [{ type: Input }],
    maxDistance: [{ type: Input }],
    maxPolarAngle: [{ type: Input }],
    panSpeed: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    MapControlsComponent.prototype.rotateSpeed;
    /** @type {?} */
    MapControlsComponent.prototype.zoomSpeed;
    /** @type {?} */
    MapControlsComponent.prototype.autoRotate;
    /** @type {?} */
    MapControlsComponent.prototype.autoRotateSpeed;
    /** @type {?} */
    MapControlsComponent.prototype.enableDamping;
    /** @type {?} */
    MapControlsComponent.prototype.dampingFactor;
    /** @type {?} */
    MapControlsComponent.prototype.screenSpacePanning;
    /** @type {?} */
    MapControlsComponent.prototype.minDistance;
    /** @type {?} */
    MapControlsComponent.prototype.maxDistance;
    /** @type {?} */
    MapControlsComponent.prototype.maxPolarAngle;
    /** @type {?} */
    MapControlsComponent.prototype.panSpeed;
    /**
     * @type {?}
     * @protected
     */
    MapControlsComponent.prototype.rendererService;
    /**
     * @type {?}
     * @protected
     */
    MapControlsComponent.prototype.raycasterService;
    /**
     * @type {?}
     * @protected
     */
    MapControlsComponent.prototype.animationService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFwLWNvbnRyb2xzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2F0ZnQvIiwic291cmNlcyI6WyJsaWIvY29udHJvbC9tYXAtY29udHJvbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUMsU0FBUyxFQUFFLEtBQUssRUFBMkIsTUFBTSxlQUFlLENBQUM7QUFDekUsT0FBTyxFQUFDLFdBQVcsRUFBZ0IsTUFBTSwyQ0FBMkMsQ0FBQztBQUNyRixPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sOEJBQThCLENBQUM7QUFDN0QsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sZ0NBQWdDLENBQUM7QUFDaEUsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sZ0NBQWdDLENBQUM7QUFDaEUsT0FBTyxFQUFDLHFCQUFxQixFQUFDLE1BQU0sMkJBQTJCLENBQUM7QUFRaEUsTUFBTSxPQUFPLG9CQUFxQixTQUFRLHFCQUFvQzs7Ozs7O0lBd0I1RSxZQUNZLGVBQWdDLEVBQ2hDLGdCQUFrQyxFQUNsQyxnQkFBa0M7UUFFNUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO1FBSi9CLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtRQUNoQyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBQ2xDLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUF6QnJDLGdCQUFXLEdBQUcsR0FBRyxDQUFDO1FBRWxCLGNBQVMsR0FBRyxHQUFHLENBQUM7UUFFaEIsZUFBVSxHQUFHLEtBQUssQ0FBQztRQUVuQixvQkFBZSxHQUFHLEdBQUcsQ0FBQztRQUV0QixrQkFBYSxHQUFHLEtBQUssQ0FBQztRQUV0QixrQkFBYSxHQUFHLEdBQUcsQ0FBQztRQUVwQix1QkFBa0IsR0FBRyxLQUFLLENBQUM7UUFFM0IsZ0JBQVcsR0FBRyxFQUFFLENBQUM7UUFFakIsZ0JBQVcsR0FBRyxHQUFHLENBQUM7UUFFbEIsa0JBQWEs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OEJBRUwsS0FBSzs0QkFFTCxLQUFLOzRCQUVMLEtBQUs7aUNBRUwsS0FBSzswQkFFTCxLQUFLOzBCQUVMLEtBQUs7NEJBRUwsS0FBSzt1QkFFTCxLQUFLOzs7O0lBcEJOLDJDQUEyQjs7SUFFM0IseUNBQXlCOztJQUV6QiwwQ0FBNEI7O0lBRTVCLCtDQUErQjs7SUFFL0IsNkNBQStCOztJQUUvQiw2Q0FBNkI7O0lBRTdCLGtEQUFvQzs7SUFFcEMsMkNBQTBCOztJQUUxQiwyQ0FBMkI7O0lBRTNCLDZDQUFtRDs7SUFFbkQsd0NBQXdCOzs7OztJQUd0QiwrQ0FBMEM7Ozs7O0lBQzFDLGdEQUE0Qzs7Ozs7SUFDNUMsZ0RBQTRDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIElucHV0LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXN9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge01hcENvbnRyb2xzLCBPcmJpdENvbnRyb2xzfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvT3JiaXRDb250cm9scyc7XHJcbmltcG9ydCB7UmVuZGVyZXJTZXJ2aWNlfSBmcm9tICcuLi9yZW5kZXJlci9yZW5kZXJlci5zZXJ2aWNlJztcclxuaW1wb3J0IHtBbmltYXRpb25TZXJ2aWNlfSBmcm9tICcuLi9hbmltYXRpb24vYW5pbWF0aW9uLnNlcnZpY2UnO1xyXG5pbXBvcnQge1JheWNhc3RlclNlcnZpY2V9IGZyb20gJy4uL3JheWNhc3Rlci9yYXljYXN0ZXIuc2VydmljZSc7XHJcbmltcG9ydCB7QWJzdHJhY3RPcmJpdENvbnRyb2xzfSBmcm9tICcuL2Fic3RyYWN0LW9yYml0LWNvbnRyb2xzJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXRmdC1tYXAtY29udHJvbHMnLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5gLFxyXG4gIHN0eWxlVXJsczogWydjb250cm9scy5jb21wb25lbnQuc2NzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBNYXBDb250cm9sc0NvbXBvbmVudCBleHRlbmRzIEFic3RyYWN0T3JiaXRDb250cm9sczxPcmJpdENvbnRyb2xzPiBpbXBsZW1lbnRzIE9uQ2hhbmdlcyB7XHJcblxyXG4gIEBJbnB1dCgpIHJvdGF0ZVNwZWVkID0gMS4wO1xyXG5cclxuICBASW5wdXQoKSB6b29tU3BlZWQgPSAxLjI7XHJcblxyXG4gIEBJbnB1dCgpIGF1dG9Sb3RhdGUgPSBmYWxzZTtcclxuXHJcbiAgQElucHV0KCkgYXV0b1JvdGF0ZVNwZWVkID0gMC41O1xyXG5cclxuICBASW5wdXQoKSBlbmFibGVEYW1waW5nID0gZmFsc2U7XHJcblxyXG4gIEBJbnB1dCgpIGRhbXBpbmdGYWN0b3IgPSAwLjE7XHJcblxyXG4gIEBJbnB1dCgpIHNjcmVlblNwYWNlUGFubmluZyA9IGZhbHNlO1xyXG5cclxuICBASW5wdXQoKSBtaW5EaXN0YW5jZSA9IDIwO1xyXG5cclxuICBASW5wdXQoKSBtYXhEaXN0YW5jZSA9IDIwMDtcclxuXHJcbiAgQElucHV0KCkgbWF4UG9sYXJBbmdsZTogbnVtYmVyID0gTWF0aC5QSSAvIDIgLSAwLjE7XHJcblxyXG4gIEBJbnB1dCgpIHBhblNwZWVkID0gMS4yO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByb3RlY3RlZCByZW5kZXJlclNlcnZpY2U6IFJlbmRlcmVyU2VydmljZSxcclxuICAgIHByb3RlY3RlZCByYXljYXN0ZXJTZXJ2aWNlOiBSYXljYXN0ZXJTZXJ2aWNlLFxyXG4gICAgcHJvdGVjdGVkIGFuaW1hdGlvblNlcnZpY2U6IEFuaW1hdGlvblNlcnZpY2VcclxuICApIHtcclxuICAgIHN1cGVyKHJlbmRlcmVyU2VydmljZSwgcmF5Y2FzdGVyU2VydmljZSk7XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICBpZiAoIXRoaXMuY29udHJvbHMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgc3VwZXIubmdPbkNoYW5nZXMoY2hhbmdlcyk7XHJcblxyXG4gICAgaWYgKGNoYW5nZXNbJ3JvdGF0ZVNwZWVkJ10pIHtcclxuICAgICAgdGhpcy5jb250cm9scy5yb3RhdGVTcGVlZCA9IHRoaXMucm90YXRlU3BlZWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoY2hhbmdlc1snem9vbVNwZWVkJ10pIHtcclxuICAgICAgdGhpcy5jb250cm9scy56b29tU3BlZWQgPSB0aGlzLnpvb21TcGVlZDtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IGFkZCBvdGhlcnNcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBzZXRVcENvbnRyb2xzKCkge1xyXG4gICAgdGhpcy5jb250cm9scyA9IG5ldyBNYXBDb250cm9scyhcclxuICAgICAgdGhpcy5jaGlsZENhbWVyYXMuZmlyc3QuY2FtZXJhLFxyXG4gICAgICB0aGlzLmxpc3RlbmluZ0NvbnRyb2xFbGVtZW50ICYmIHRoaXMubGlzdGVuaW5nQ29udHJvbEVsZW1lbnQubmF0aXZlRWxlbWVudFxyXG4gICAgKTtcclxuICAgIHRoaXMuY29udHJvbHMucm90YXRlU3BlZWQgPSB0aGlzLnJvdGF0ZVNwZWVkO1xyXG4gICAgdGhpcy5jb250cm9scy56b29tU3BlZWQgPSB0aGlzLnpvb21TcGVlZDtcclxuXHJcbiAgICB0aGlzLmNvbnRyb2xzLnBhblNwZWVkID0gdGhpcy5wYW5TcGVlZDtcclxuXHJcbiAgICB0aGlzLmNvbnRyb2xzLmF1dG9Sb3RhdGUgPSB0aGlzLmF1dG9Sb3RhdGU7XHJcbiAgICB0aGlzLmNvbnRyb2xzLmF1dG9Sb3RhdGVTcGVlZCA9IHRoaXMuYXV0b1JvdGF0ZVNwZWVkO1xyXG4gICAgdGhpcy5jb250cm9scy5lbmFibGVEYW1waW5nID0gdGhpcy5lbmFibGVEYW1waW5nOyAvLyBhbiBhbmltYXRpb24gbG9vcCBpcyByZXF1aXJlZCB3aGVuIGVpdGhlciBkYW1waW5nIG9yIGF1dG8tcm90YXRpb24gYXJlIGVuYWJsZWRcclxuICAgIHRoaXMuY29udHJvbHMuZGFtcGluZ0ZhY3RvciA9IHRoaXMuZGFtcGluZ0ZhY3RvcjtcclxuXHJcbiAgICB0aGlzLmNvbnRyb2xzLnNjcmVlblNwYWNlUGFubmluZyA9IHRoaXMuc2NyZWVuU3BhY2VQYW5uaW5nO1xyXG4gICAgdGhpcy5jb250cm9scy5taW5EaXN0YW5jZSA9IHRoaXMubWluRGlzdGFuY2U7XHJcbiAgICB0aGlzLmNvbnRyb2xzLm1heERpc3RhbmNlID0gdGhpcy5tYXhEaXN0YW5jZTtcclxuICAgIHRoaXMuY29udHJvbHMubWF4UG9sYXJBbmdsZSA9IHRoaXMubWF4UG9sYXJBbmdsZTtcclxuXHJcbiAgICB0aGlzLmNvbnRyb2xzLnVwZGF0ZSgpO1xyXG5cclxuICAgIC8vIEFkdmFuY2VkIGFuaW1hdGlvbjpcclxuICAgIGlmICh0aGlzLmF1dG9Sb3RhdGUgfHwgdGhpcy5lbmFibGVEYW1waW5nKSB7XHJcbiAgICAgIHRoaXMuYW5pbWF0aW9uU2VydmljZS5hbmltYXRlLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jb250cm9scy51cGRhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuY29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXJTZXJ2aWNlLnJlbmRlcigpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5hbmltYXRpb25TZXJ2aWNlLnN0YXJ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZW5kZXJlclNlcnZpY2UucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuIl19