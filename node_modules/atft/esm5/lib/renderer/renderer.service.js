/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import * as THREE from 'three';
import { CSS3DRenderer } from 'three/examples/jsm/renderers/CSS3DRenderer';
/* TODO: Refactor to pair
interface RendererPair {
  scene: SceneComponent;
  camera: AbstractCamera<any>;
  webGlRenderer: THREE.Renderer;
  layers: Array<number>;
}
*/
var RendererService = /** @class */ (function () {
    function RendererService() {
        this.init = false;
    }
    /**
     * @return {?}
     */
    RendererService.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?} scene
     * @return {?}
     */
    RendererService.prototype.setScene = /**
     * @param {?} scene
     * @return {?}
     */
    function (scene) {
        this.scene = scene;
    };
    /**
     * @param {?} camera
     * @return {?}
     */
    RendererService.prototype.setCamera = /**
     * @param {?} camera
     * @return {?}
     */
    function (camera) {
        this.camera = camera;
        this.camera.updateAspectRatio(this.aspect);
    };
    /**
     * @return {?}
     */
    RendererService.prototype.render = /**
     * @return {?}
     */
    function () {
        if (this.init && this.scene && this.camera) {
            //  console.log('render');
            this.webGlRenderer.render(this.scene.getObject(), this.camera.camera);
            this.css3dRenderer.render(this.scene.getObject(), this.camera.camera);
        }
    };
    /**
     * @param {?} canvas
     * @return {?}
     */
    RendererService.prototype.initialize = /**
     * @param {?} canvas
     * @return {?}
     */
    function (canvas) {
        // console.log('RendererComponent.initialize');
        // TODO: Multiple renderers
        this.webGlRenderer = new THREE.WebGLRenderer({
            canvas: canvas,
            antialias: true,
            alpha: true
        });
        this.webGlRenderer.setPixelRatio(devicePixelRatio);
        this.webGlRenderer.setSize(canvas.clientWidth, canvas.clientHeight, false);
        // TODO: props
        this.webGlRenderer.shadowMap.enabled = false;
        this.webGlRenderer.shadowMap.autoUpdate = false;
        this.webGlRenderer.shadowMap.type = THREE.PCFSoftShadowMap;
        this.webGlRenderer.setClearColor(0x000000, 0);
        this.webGlRenderer.autoClear = true;
        canvas.style.zIndex = '2';
        // ------------------------------ START
        this.css3dRenderer = new CSS3DRenderer();
        this.css3dRenderer.setSize(window.innerWidth, window.innerHeight);
        this.css3dRenderer.domElement.style.position = 'absolute';
        this.css3dRenderer.domElement.style.top = '0';
        this.css3dRenderer.domElement.style.zIndex = '1';
        canvas.parentElement.appendChild(this.css3dRenderer.domElement);
        // ------------------------------ END
        this.updateChildCamerasAspectRatio(canvas);
        this.init = true;
        this.render();
    };
    /**
     * @param {?} canvas
     * @param {?} size
     * @return {?}
     */
    RendererService.prototype.resize = /**
     * @param {?} canvas
     * @param {?} size
     * @return {?}
     */
    function (canvas, size) {
        canvas.style.width = size;
        canvas.style.height = size;
        /** @type {?} */
        var width = canvas.clientWidth;
        /** @type {?} */
        var height = canvas.clientHeight;
        this.webGlRenderer.setSize(width, height, true);
        this.css3dRenderer.setSize(width, height);
        this.updateChildCamerasAspectRatio(canvas);
        this.render();
    };
    /**
     * @private
     * @param {?} canvas
     * @return {?}
     */
    RendererService.prototype.calculateAspectRatio = /**
     * @private
     * @param {?} canvas
     * @return {?}
     */
    function (canvas) {
        /** @type {?} */
        var height = canvas.clientHeight;
        if (height === 0) {
            return 0;
        }
        this.aspect = canvas.clientWidth / canvas.clientHeight;
    };
    /**
     * @private
     * @param {?} canvas
     * @return {?}
     */
    RendererService.prototype.updateChildCamerasAspectRatio = /**
     * @private
     * @param {?} canvas
     * @return {?}
     */
    function (canvas) {
        this.calculateAspectRatio(canvas);
        if (this.camera) {
            this.camera.updateAspectRatio(this.aspect);
        }
    };
    RendererService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    RendererService.ctorParameters = function () { return []; };
    return RendererService;
}());
export { RendererService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    RendererService.prototype.init;
    /**
     * @type {?}
     * @private
     */
    RendererService.prototype.scene;
    /**
     * @type {?}
     * @private
     */
    RendererService.prototype.camera;
    /**
     * @type {?}
     * @private
     */
    RendererService.prototype.webGlRenderer;
    /**
     * @type {?}
     * @private
     */
    RendererService.prototype.css3dRenderer;
    /**
     * @type {?}
     * @private
     */
    RendererService.prototype.aspect;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyZXIuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2F0ZnQvIiwic291cmNlcyI6WyJsaWIvcmVuZGVyZXIvcmVuZGVyZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFVBQVUsRUFBWSxNQUFNLGVBQWUsQ0FBQztBQUdwRCxPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sNENBQTRDLENBQUM7Ozs7Ozs7OztBQVd6RTtJQWFFO1FBWFEsU0FBSSxHQUFHLEtBQUssQ0FBQztJQWFyQixDQUFDOzs7O0lBRUQscUNBQVc7OztJQUFYO0lBRUEsQ0FBQzs7Ozs7SUFHTSxrQ0FBUTs7OztJQUFmLFVBQWdCLEtBQXFCO1FBQ25DLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQ3JCLENBQUM7Ozs7O0lBRU0sbUNBQVM7Ozs7SUFBaEIsVUFBaUIsTUFBMkI7UUFDMUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0MsQ0FBQzs7OztJQUVNLGdDQUFNOzs7SUFBYjtRQUNFLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDMUMsMEJBQTBCO1lBQzFCLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN0RSxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDdkU7SUFD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TSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDO0lBQ3pELENBQUM7Ozs7OztJQUVPLHVEQUE2Qjs7Ozs7SUFBckMsVUFBc0MsTUFBeUI7UUFDN0QsSUFBSSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2xDLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNmLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQzVDO0lBQ0gsQ0FBQzs7Z0JBcEdGLFVBQVU7Ozs7SUFzR1gsc0JBQUM7Q0FBQSxBQXRHRCxJQXNHQztTQXJHWSxlQUFlOzs7Ozs7SUFDMUIsK0JBQXFCOzs7OztJQUVyQixnQ0FBOEI7Ozs7O0lBQzlCLGlDQUFvQzs7Ozs7SUFDcEMsd0NBQTJDOzs7OztJQUUzQyx3Q0FBcUM7Ozs7O0lBRXJDLGlDQUF1QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW5qZWN0YWJsZSwgT25EZXN0cm95fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtTY2VuZUNvbXBvbmVudH0gZnJvbSAnLi4vb2JqZWN0L3NjZW5lLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7QWJzdHJhY3RDYW1lcmF9IGZyb20gJy4uL2NhbWVyYS9hYnN0cmFjdC1jYW1lcmEnO1xyXG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7Q1NTM0RSZW5kZXJlcn0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL3JlbmRlcmVycy9DU1MzRFJlbmRlcmVyJztcclxuXHJcbi8qIFRPRE86IFJlZmFjdG9yIHRvIHBhaXJcclxuaW50ZXJmYWNlIFJlbmRlcmVyUGFpciB7XHJcbiAgc2NlbmU6IFNjZW5lQ29tcG9uZW50O1xyXG4gIGNhbWVyYTogQWJzdHJhY3RDYW1lcmE8YW55PjtcclxuICB3ZWJHbFJlbmRlcmVyOiBUSFJFRS5SZW5kZXJlcjtcclxuICBsYXllcnM6IEFycmF5PG51bWJlcj47XHJcbn1cclxuKi9cclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFJlbmRlcmVyU2VydmljZSBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XHJcbiAgcHJpdmF0ZSBpbml0ID0gZmFsc2U7XHJcblxyXG4gIHByaXZhdGUgc2NlbmU6IFNjZW5lQ29tcG9uZW50O1xyXG4gIHByaXZhdGUgY2FtZXJhOiBBYnN0cmFjdENhbWVyYTxhbnk+O1xyXG4gIHByaXZhdGUgd2ViR2xSZW5kZXJlcjogVEhSRUUuV2ViR0xSZW5kZXJlcjtcclxuICAvLyBUT0RPOlxyXG4gIHByaXZhdGUgY3NzM2RSZW5kZXJlcjogQ1NTM0RSZW5kZXJlcjtcclxuXHJcbiAgcHJpdmF0ZSBhc3BlY3Q6IG51bWJlcjtcclxuXHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG5cclxuICB9XHJcblxyXG5cclxuICBwdWJsaWMgc2V0U2NlbmUoc2NlbmU6IFNjZW5lQ29tcG9uZW50KSB7XHJcbiAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0Q2FtZXJhKGNhbWVyYTogQWJzdHJhY3RDYW1lcmE8YW55Pikge1xyXG4gICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XHJcbiAgICB0aGlzLmNhbWVyYS51cGRhdGVBc3BlY3RSYXRpbyh0aGlzLmFzcGVjdCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgaWYgKHRoaXMuaW5pdCAmJiB0aGlzLnNjZW5lICYmIHRoaXMuY2FtZXJhKSB7XHJcbiAgICAgIC8vICBjb25zb2xlLmxvZygncmVuZGVyJyk7XHJcbiAgICAgIHRoaXMud2ViR2xSZW5kZXJlci5yZW5kZXIodGhpcy5zY2VuZS5nZXRPYmplY3QoKSwgdGhpcy5jYW1lcmEuY2FtZXJhKTtcclxuICAgICAgdGhpcy5jc3MzZFJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lLmdldE9iamVjdCgpLCB0aGlzLmNhbWVyYS5jYW1lcmEpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGluaXRpYWxpemUoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xyXG4gICAgLy8gY29uc29sZS5sb2coJ1JlbmRlcmVyQ29tcG9uZW50LmluaXRpYWxpemUnKTtcclxuXHJcbiAgICAvLyBUT0RPOiBNdWx0aXBsZSByZW5kZXJlcnNcclxuICAgIHRoaXMud2ViR2xSZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHtcclxuICAgICAgY2FudmFzOiBjYW52YXMsXHJcbiAgICAgIGFudGlhbGlhczogdHJ1ZSxcclxuICAgICAgYWxwaGE6IHRydWVcclxuICAgIH0pO1xyXG4gICAgdGhpcy53ZWJHbFJlbmRlcmVyLnNldFBpeGVsUmF0aW8oZGV2aWNlUGl4ZWxSYXRpbyk7XHJcbiAgICB0aGlzLndlYkdsUmVuZGVyZXIuc2V0U2l6ZShjYW52YXMuY2xpZW50V2lkdGgsIGNhbnZhcy5jbGllbnRIZWlnaHQsIGZhbHNlKTtcclxuXHJcbiAgICAvLyBUT0RPOiBwcm9wc1xyXG4gICAgdGhpcy53ZWJHbFJlbmRlcmVyLnNoYWRvd01hcC5lbmFibGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLndlYkdsUmVuZGVyZXIuc2hhZG93TWFwLmF1dG9VcGRhdGUgPSBmYWxzZTtcclxuICAgIHRoaXMud2ViR2xSZW5kZXJlci5zaGFkb3dNYXAudHlwZSA9IFRIUkVFLlBDRlNvZnRTaGFkb3dNYXA7XHJcbiAgICB0aGlzLndlYkdsUmVuZGVyZXIuc2V0Q2xlYXJDb2xvcigweDAwMDAwMCwgMCk7XHJcbiAgICB0aGlzLndlYkdsUmVuZGVyZXIuYXV0b0NsZWFyID0gdHJ1ZTtcclxuICAgIGNhbnZhcy5zdHlsZS56SW5kZXggPSAnMic7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFNUQVJUXHJcbiAgICB0aGlzLmNzczNkUmVuZGVyZXIgPSBuZXcgQ1NTM0RSZW5kZXJlcigpO1xyXG4gICAgdGhpcy5jc3MzZFJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgICB0aGlzLmNzczNkUmVuZGVyZXIuZG9tRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICB0aGlzLmNzczNkUmVuZGVyZXIuZG9tRWxlbWVudC5zdHlsZS50b3AgPSAnMCc7XHJcbiAgICB0aGlzLmNzczNkUmVuZGVyZXIuZG9tRWxlbWVudC5zdHlsZS56SW5kZXggPSAnMSc7XHJcbiAgICBjYW52YXMucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNzczNkUmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEVORFxyXG5cclxuICAgIHRoaXMudXBkYXRlQ2hpbGRDYW1lcmFzQXNwZWN0UmF0aW8oY2FudmFzKTtcclxuICAgIHRoaXMuaW5pdCA9IHRydWU7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcblxyXG4gIHB1YmxpYyByZXNpemUoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgc2l6ZTogc3RyaW5nKSB7XHJcbiAgICBjYW52YXMuc3R5bGUud2lkdGggPSBzaXplO1xyXG4gICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IHNpemU7XHJcbiAgICBjb25zdCB3aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcclxuICAgIGNvbnN0IGhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XHJcblxyXG4gICAgdGhpcy53ZWJHbFJlbmRlcmVyLnNldFNpemUod2lkdGgsIGhlaWdodCwgdHJ1ZSk7XHJcbiAgICB0aGlzLmNzczNkUmVuZGVyZXIuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcclxuICAgIHRoaXMudXBkYXRlQ2hpbGRDYW1lcmFzQXNwZWN0UmF0aW8oY2FudmFzKTtcclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNhbGN1bGF0ZUFzcGVjdFJhdGlvKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuICAgIGNvbnN0IGhlaWdodCA9IGNhbnZhcy5jbGllbnRIZWlnaHQ7XHJcbiAgICBpZiAoaGVpZ2h0ID09PSAwKSB7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgdGhpcy5hc3BlY3QgPSBjYW52YXMuY2xpZW50V2lkdGggLyBjYW52YXMuY2xpZW50SGVpZ2h0O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVDaGlsZENhbWVyYXNBc3BlY3RSYXRpbyhjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICB0aGlzLmNhbGN1bGF0ZUFzcGVjdFJhdGlvKGNhbnZhcyk7XHJcbiAgICBpZiAodGhpcy5jYW1lcmEpIHtcclxuICAgICAgdGhpcy5jYW1lcmEudXBkYXRlQXNwZWN0UmF0aW8odGhpcy5hc3BlY3QpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn1cclxuIl19