/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input } from '@angular/core';
import { MapControls } from 'three/examples/jsm/controls/OrbitControls';
import { RendererService } from '../renderer/renderer.service';
import { AnimationService } from '../animation/animation.service';
import { RaycasterService } from '../raycaster/raycaster.service';
import { AbstractOrbitControls } from './abstract-orbit-controls';
var MapControlsComponent = /** @class */ (function (_super) {
    tslib_1.__extends(MapControlsComponent, _super);
    function MapControlsComponent(rendererService, raycasterService, animationService) {
        var _this = _super.call(this, rendererService, raycasterService) || this;
        _this.rendererService = rendererService;
        _this.raycasterService = raycasterService;
        _this.animationService = animationService;
        _this.rotateSpeed = 1.0;
        _this.zoomSpeed = 1.2;
        _this.autoRotate = false;
        _this.autoRotateSpeed = 0.5;
        _this.enableDamping = false;
        _this.dampingFactor = 0.1;
        _this.screenSpacePanning = false;
        _this.minDistance = 20;
        _this.maxDistance = 200;
        _this.maxPolarAngle = Math.PI / 2 - 0.1;
        _this.panSpeed = 1.2;
        return _this;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    MapControlsComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (!this.controls) {
            return;
        }
        _super.prototype.ngOnChanges.call(this, changes);
        if (changes['rotateSpeed']) {
            this.controls.rotateSpeed = this.rotateSpeed;
        }
        if (changes['zoomSpeed']) {
            this.controls.zoomSpeed = this.zoomSpeed;
        }
        // TODO: add others
    };
    /**
     * @protected
     * @return {?}
     */
    MapControlsComponent.prototype.setUpControls = /**
     * @protected
     * @return {?}
     */
    function () {
        var _this = this;
        this.controls = new MapControls(this.childCameras.first.camera, this.listeningControlElement && this.listeningControlElement.nativeElement);
        this.controls.rotateSpeed = this.rotateSpeed;
        this.controls.zoomSpeed = this.zoomSpeed;
        this.controls.panSpeed = this.panSpeed;
        this.controls.autoRotate = this.autoRotate;
        this.controls.autoRotateSpeed = this.autoRotateSpeed;
        this.controls.enableDamping = this.enableDamping; // an animation loop is required when either damping or auto-rotation are enabled
        this.controls.dampingFactor = this.dampingFactor;
        this.controls.screenSpacePanning = this.screenSpacePanning;
        this.controls.minDistance = this.minDistance;
        this.controls.maxDistance = this.maxDistance;
        this.controls.maxPolarAngle = this.maxPolarAngle;
        this.controls.update();
        // Advanced animation:
        if (this.autoRotate || this.enableDamping) {
            this.animationService.animate.subscribe((/**
             * @return {?}
             */
            function () {
                _this.controls.update();
            }));
            this.controls.addEventListener('change', (/**
             * @return {?}
             */
            function () {
                _this.rendererService.render();
            }));
            this.animationService.start();
        }
        this.rendererService.render();
    };
    MapControlsComponent.decorators = [
        { type: Component, args: [{
                    selector: 'atft-map-controls',
                    template: "\n      <ng-content></ng-content>",
                    styles: [":host{display:flex;flex:1}"]
                }] }
    ];
    /** @nocollapse */
    MapControlsComponent.ctorParameters = function () { return [
        { type: RendererService },
        { type: RaycasterService },
        { type: AnimationService }
    ]; };
    MapControlsComponent.propDecorators = {
        rotateSpeed: [{ type: Input }],
        zoomSpeed: [{ type: Input }],
        autoRotate: [{ type: Input }],
        autoRotateSpeed: [{ type: Input }],
        enableDamping: [{ type: Input }],
        dampingFactor: [{ type: Input }],
        screenSpacePanning: [{ type: Input }],
        minDistance: [{ type: Input }],
        maxDistance: [{ type: Input }],
        maxPolarAngle: [{ type: Input }],
        panSpeed: [{ type: Input }]
    };
    return MapControlsComponent;
}(AbstractOrbitControls));
export { MapControlsComponent };
if (false) {
    /** @type {?} */
    MapControlsComponent.prototype.rotateSpeed;
    /** @type {?} */
    MapControlsComponent.prototype.zoomSpeed;
    /** @type {?} */
    MapControlsComponent.prototype.autoRotate;
    /** @type {?} */
    MapControlsComponent.prototype.autoRotateSpeed;
    /** @type {?} */
    MapControlsComponent.prototype.enableDamping;
    /** @type {?} */
    MapControlsComponent.prototype.dampingFactor;
    /** @type {?} */
    MapControlsComponent.prototype.screenSpacePanning;
    /** @type {?} */
    MapControlsComponent.prototype.minDistance;
    /** @type {?} */
    MapControlsComponent.prototype.maxDistance;
    /** @type {?} */
    MapControlsComponent.prototype.maxPolarAngle;
    /** @type {?} */
    MapControlsComponent.prototype.panSpeed;
    /**
     * @type {?}
     * @protected
     */
    MapControlsComponent.prototype.rendererService;
    /**
     * @type {?}
     * @protected
     */
    MapControlsComponent.prototype.raycasterService;
    /**
     * @type {?}
     * @protected
     */
    MapControlsComponent.prototype.animationService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFwLWNvbnRyb2xzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2F0ZnQvIiwic291cmNlcyI6WyJsaWIvY29udHJvbC9tYXAtY29udHJvbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxLQUFLLEVBQTJCLE1BQU0sZUFBZSxDQUFDO0FBQ3pFLE9BQU8sRUFBQyxXQUFXLEVBQWdCLE1BQU0sMkNBQTJDLENBQUM7QUFDckYsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLDhCQUE4QixDQUFDO0FBQzdELE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLGdDQUFnQyxDQUFDO0FBQ2hFLE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLGdDQUFnQyxDQUFDO0FBQ2hFLE9BQU8sRUFBQyxxQkFBcUIsRUFBQyxNQUFNLDJCQUEyQixDQUFDO0FBRWhFO0lBTTBDLGdEQUFvQztJQXdCNUUsOEJBQ1ksZUFBZ0MsRUFDaEMsZ0JBQWtDLEVBQ2xDLGdCQUFrQztRQUg5QyxZQUtFLGtCQUFNLGVBQWUsRUFBRSxnQkFBZ0IsQ0FBQyxTQUN6QztRQUxXLHFCQUFlLEdBQWYsZUFBZSxDQUFpQjtRQUNoQyxzQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBQ2xDLHNCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUF6QnJDLGlCQUFXLEdBQUcsR0FBRyxDQUFDO1FBRWxCLGVBQVMsR0FBRyxHQUFHLENBQUM7UUFFaEIsZ0JBQVUsR0FBRyxLQUFLLENBQUM7UUFFbkIscUJBQWUsR0FBRyxHQUFHLENBQUM7UUFFdEIsbUJBQWEsR0FBRyxLQUFLLENBQUM7UUFFdEIsbUJBQWEsR0FBRyxHQUFHLENBQUM7UUFFcEIsd0JBQWtCLEdBQUcsS0FBSyxDQUFDO1FBRTNCLGlCQUFXLEdBQUcsRUFBRSxDQUFDO1FBRWpCLGlCQUFXLEdBQUcsR0FBRyxDQUFDO1FBRWxCLG1CQUFhLEdBQVcsSUFBSSxDQUFDLEVB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LEtBQUs7Z0NBRUwsS0FBSztnQ0FFTCxLQUFLO3FDQUVMLEtBQUs7OEJBRUwsS0FBSzs4QkFFTCxLQUFLO2dDQUVMLEtBQUs7MkJBRUwsS0FBSzs7SUE4RFIsMkJBQUM7Q0FBQSxBQTFGRCxDQU0wQyxxQkFBcUIsR0FvRjlEO1NBcEZZLG9CQUFvQjs7O0lBRS9CLDJDQUEyQjs7SUFFM0IseUNBQXlCOztJQUV6QiwwQ0FBNEI7O0lBRTVCLCtDQUErQjs7SUFFL0IsNkNBQStCOztJQUUvQiw2Q0FBNkI7O0lBRTdCLGtEQUFvQzs7SUFFcEMsMkNBQTBCOztJQUUxQiwyQ0FBMkI7O0lBRTNCLDZDQUFtRDs7SUFFbkQsd0NBQXdCOzs7OztJQUd0QiwrQ0FBMEM7Ozs7O0lBQzFDLGdEQUE0Qzs7Ozs7SUFDNUMsZ0RBQTRDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIElucHV0LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXN9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge01hcENvbnRyb2xzLCBPcmJpdENvbnRyb2xzfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvT3JiaXRDb250cm9scyc7XHJcbmltcG9ydCB7UmVuZGVyZXJTZXJ2aWNlfSBmcm9tICcuLi9yZW5kZXJlci9yZW5kZXJlci5zZXJ2aWNlJztcclxuaW1wb3J0IHtBbmltYXRpb25TZXJ2aWNlfSBmcm9tICcuLi9hbmltYXRpb24vYW5pbWF0aW9uLnNlcnZpY2UnO1xyXG5pbXBvcnQge1JheWNhc3RlclNlcnZpY2V9IGZyb20gJy4uL3JheWNhc3Rlci9yYXljYXN0ZXIuc2VydmljZSc7XHJcbmltcG9ydCB7QWJzdHJhY3RPcmJpdENvbnRyb2xzfSBmcm9tICcuL2Fic3RyYWN0LW9yYml0LWNvbnRyb2xzJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXRmdC1tYXAtY29udHJvbHMnLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5gLFxyXG4gIHN0eWxlVXJsczogWydjb250cm9scy5jb21wb25lbnQuc2NzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBNYXBDb250cm9sc0NvbXBvbmVudCBleHRlbmRzIEFic3RyYWN0T3JiaXRDb250cm9sczxPcmJpdENvbnRyb2xzPiBpbXBsZW1lbnRzIE9uQ2hhbmdlcyB7XHJcblxyXG4gIEBJbnB1dCgpIHJvdGF0ZVNwZWVkID0gMS4wO1xyXG5cclxuICBASW5wdXQoKSB6b29tU3BlZWQgPSAxLjI7XHJcblxyXG4gIEBJbnB1dCgpIGF1dG9Sb3RhdGUgPSBmYWxzZTtcclxuXHJcbiAgQElucHV0KCkgYXV0b1JvdGF0ZVNwZWVkID0gMC41O1xyXG5cclxuICBASW5wdXQoKSBlbmFibGVEYW1waW5nID0gZmFsc2U7XHJcblxyXG4gIEBJbnB1dCgpIGRhbXBpbmdGYWN0b3IgPSAwLjE7XHJcblxyXG4gIEBJbnB1dCgpIHNjcmVlblNwYWNlUGFubmluZyA9IGZhbHNlO1xyXG5cclxuICBASW5wdXQoKSBtaW5EaXN0YW5jZSA9IDIwO1xyXG5cclxuICBASW5wdXQoKSBtYXhEaXN0YW5jZSA9IDIwMDtcclxuXHJcbiAgQElucHV0KCkgbWF4UG9sYXJBbmdsZTogbnVtYmVyID0gTWF0aC5QSSAvIDIgLSAwLjE7XHJcblxyXG4gIEBJbnB1dCgpIHBhblNwZWVkID0gMS4yO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByb3RlY3RlZCByZW5kZXJlclNlcnZpY2U6IFJlbmRlcmVyU2VydmljZSxcclxuICAgIHByb3RlY3RlZCByYXljYXN0ZXJTZXJ2aWNlOiBSYXljYXN0ZXJTZXJ2aWNlLFxyXG4gICAgcHJvdGVjdGVkIGFuaW1hdGlvblNlcnZpY2U6IEFuaW1hdGlvblNlcnZpY2VcclxuICApIHtcclxuICAgIHN1cGVyKHJlbmRlcmVyU2VydmljZSwgcmF5Y2FzdGVyU2VydmljZSk7XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICBpZiAoIXRoaXMuY29udHJvbHMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgc3VwZXIubmdPbkNoYW5nZXMoY2hhbmdlcyk7XHJcblxyXG4gICAgaWYgKGNoYW5nZXNbJ3JvdGF0ZVNwZWVkJ10pIHtcclxuICAgICAgdGhpcy5jb250cm9scy5yb3RhdGVTcGVlZCA9IHRoaXMucm90YXRlU3BlZWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoY2hhbmdlc1snem9vbVNwZWVkJ10pIHtcclxuICAgICAgdGhpcy5jb250cm9scy56b29tU3BlZWQgPSB0aGlzLnpvb21TcGVlZDtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IGFkZCBvdGhlcnNcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBzZXRVcENvbnRyb2xzKCkge1xyXG4gICAgdGhpcy5jb250cm9scyA9IG5ldyBNYXBDb250cm9scyhcclxuICAgICAgdGhpcy5jaGlsZENhbWVyYXMuZmlyc3QuY2FtZXJhLFxyXG4gICAgICB0aGlzLmxpc3RlbmluZ0NvbnRyb2xFbGVtZW50ICYmIHRoaXMubGlzdGVuaW5nQ29udHJvbEVsZW1lbnQubmF0aXZlRWxlbWVudFxyXG4gICAgKTtcclxuICAgIHRoaXMuY29udHJvbHMucm90YXRlU3BlZWQgPSB0aGlzLnJvdGF0ZVNwZWVkO1xyXG4gICAgdGhpcy5jb250cm9scy56b29tU3BlZWQgPSB0aGlzLnpvb21TcGVlZDtcclxuXHJcbiAgICB0aGlzLmNvbnRyb2xzLnBhblNwZWVkID0gdGhpcy5wYW5TcGVlZDtcclxuXHJcbiAgICB0aGlzLmNvbnRyb2xzLmF1dG9Sb3RhdGUgPSB0aGlzLmF1dG9Sb3RhdGU7XHJcbiAgICB0aGlzLmNvbnRyb2xzLmF1dG9Sb3RhdGVTcGVlZCA9IHRoaXMuYXV0b1JvdGF0ZVNwZWVkO1xyXG4gICAgdGhpcy5jb250cm9scy5lbmFibGVEYW1waW5nID0gdGhpcy5lbmFibGVEYW1waW5nOyAvLyBhbiBhbmltYXRpb24gbG9vcCBpcyByZXF1aXJlZCB3aGVuIGVpdGhlciBkYW1waW5nIG9yIGF1dG8tcm90YXRpb24gYXJlIGVuYWJsZWRcclxuICAgIHRoaXMuY29udHJvbHMuZGFtcGluZ0ZhY3RvciA9IHRoaXMuZGFtcGluZ0ZhY3RvcjtcclxuXHJcbiAgICB0aGlzLmNvbnRyb2xzLnNjcmVlblNwYWNlUGFubmluZyA9IHRoaXMuc2NyZWVuU3BhY2VQYW5uaW5nO1xyXG4gICAgdGhpcy5jb250cm9scy5taW5EaXN0YW5jZSA9IHRoaXMubWluRGlzdGFuY2U7XHJcbiAgICB0aGlzLmNvbnRyb2xzLm1heERpc3RhbmNlID0gdGhpcy5tYXhEaXN0YW5jZTtcclxuICAgIHRoaXMuY29udHJvbHMubWF4UG9sYXJBbmdsZSA9IHRoaXMubWF4UG9sYXJBbmdsZTtcclxuXHJcbiAgICB0aGlzLmNvbnRyb2xzLnVwZGF0ZSgpO1xyXG5cclxuICAgIC8vIEFkdmFuY2VkIGFuaW1hdGlvbjpcclxuICAgIGlmICh0aGlzLmF1dG9Sb3RhdGUgfHwgdGhpcy5lbmFibGVEYW1waW5nKSB7XHJcbiAgICAgIHRoaXMuYW5pbWF0aW9uU2VydmljZS5hbmltYXRlLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jb250cm9scy51cGRhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuY29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXJTZXJ2aWNlLnJlbmRlcigpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5hbmltYXRpb25TZXJ2aWNlLnN0YXJ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZW5kZXJlclNlcnZpY2UucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuIl19